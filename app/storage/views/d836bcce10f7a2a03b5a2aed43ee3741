
<?php $__env->startSection('head'); ?>

<?php echo HTML::style('/css/redactor.css'); ?>
<?php echo HTML::style('/css/redactor.bootstrap.css'); ?>
<?php echo HTML::script('/js/redactor.min.js'); ?>

<style type="text/css">
	
	
</style>

<script type="text/javascript">

$(document).ready(function(){

	
});


$(function(){
	$('#redactor_content').redactor({
		imageUpload: '/tutorials/imageupload',
		//fileUpload: '/tutorials/fileupload',
		//imageGetJson: '/tutorials/getjson',
		//linebreaks: true,
		paragraphy: false,
		toolbarFixed: true,
		toolbarFixedTopOffset: 75, 
		buttons: ['formatting', '|', 'bold', 'italic', 'underline', '|',
'unorderedlist', 'orderedlist', 'outdent', 'indent', '|',
'image', 'video', 'file', 'link', '|', 'html' ],
		wym: true,
		formattingTags: ['h2', 'h3', 'p' ],
		allowedTags: ['h2', 'h3', 'p', 'b', 'strong', 'i', 'u', 'ul', 'ol', 'li', 'dl', 'dt', 'dd', 'img', 'a', 'br'],

		langs: {
				en: {
					html: 'HTML',
					video: 'Insert Video',
					image: 'Insert Image',
					link: 'Link',
					link_insert: 'Insert link',
					unlink: 'Unlink',
					formatting: 'Formatting',
					paragraph: 'Normal text',
					quote: 'Quote',
					code: 'Code',
					header2: 'Section',
					header3: 'Heading',
					bold: 'Bold',
					italic: 'Italic',
					unorderedlist: 'Unordered List',
					orderedlist: 'Ordered List',
					outdent: 'Outdent',
					indent: 'Indent',
					cancel: 'Cancel',
					insert: 'Insert',
					save: 'Save',
					_delete: 'Delete',
					rows: 'Rows',
					columns: 'Columns',
					add_head: 'Add Head',
					delete_head: 'Delete Head',
					title: 'Title',
					image_position: 'Position',
					none: 'None',
					left: 'Left',
					right: 'Right',
					image_web_link: 'Image Web Link',
					text: 'Text',
					mailto: 'Email',
					web: 'URL',
					video_html_code: 'Video Embed Code',
					file: 'Insert File',
					upload: 'Upload',
					download: 'Download',
					choose: 'Choose',
					or_choose: 'Or choose',
					drop_file_here: 'Drop file here',
					align_left: 'Align text to the left',
					align_center: 'Center text',
					align_right: 'Align text to the right',
					align_justify: 'Justify text',
					horizontalrule: 'Add Section',
					deleted: 'Deleted',
					anchor: 'Anchor',
					link_new_tab: 'Open link in new tab',
					underline: 'Underline',
					alignment: 'Alignment',
					filename: 'Name (optional)',
				}
		},
		
	});
});


function delete_tutorial() {
	bootbox.confirm("<h3>Do you really want to delete this tutorial?</h3>", function(result) {
		if (result) {
			$("form").attr("action", "/tutorials/delete");
			$("form").submit();
		}
	}); 
}
</script>

<?php $__env->stopSection(); ?>

<?php $__env->startSection('content'); ?>
<?php echo Form::open(); ?>


<?php echo (isset($tutorial)) ? Form::hidden('_id', $tutorial->id) : ''; ?>

<h1>Tutorial</h1>
<div class="well">
	<div class="row">
		<div class="span11">
			<h3>What is the title of your tutorial?</h3>
			<fieldset>
				<?php echo Form::text('title', (isset($tutorial)) ? $tutorial->title : '' , array(
					'placeholder' => 'Title',
					'class' => 'span11',
				));; ?>
				<?php echo ($errors->first('title')) ? '<p class="alert alert-error">Please provide a title</p>': ''; ?>
			</fieldset>
			<h3>What can others learn from it?</h3>
			<fieldset>
				<?php echo Form::textarea('description', (isset($tutorial)) ? $tutorial->description : '' , array(
					'placeholder' => 'Description',
					'class' => 'span11',
					'style' => 'height: 50px; resize: none; ',
				));; ?>
				<?php echo ($errors->first('description')) ? '<p class="alert alert-error">Please provide a description</p>': ''; ?>
			</fieldset>
			<p>&nbsp;</p>

			<h3>What steps need to be made?</h3>
			<fieldset>
				<textarea id="redactor_content" name="content" style="display: none;">
					<?php echo (isset($tutorial)) ? $tutorial->content : '<h2>De bello gallico</h2>
					<p>Gallia est omnis devisa in partes tres...</p>'; ?>
				</textarea>			
			</fieldset>			
			<p>&nbsp;</p>
			<input type="submit" value="Save tutorial" class="btn btn-primary">
			<?php if (Sentry::Check() && Sentry::getUser()->hasAccess('is_admin')): ?>
			<?php echo (isset($tutorial)) ? '<button type="button" class="btn btn-danger" onclick="delete_tutorial();">Delete tutorial</button>' : ''; ?>
			<?php endif; ?>
		</div>
	</div>

</div>
	<?php echo Form::close(); ?>



<?php $__env->stopSection(); ?>
<?php echo $__env->make('layouts.master', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>